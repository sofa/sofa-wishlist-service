/**
 * sofa-wishlist-service - v0.4.0 - Wed Mar 25 2015 14:42:36 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(t){"use strict";t.define("sofa.WishlistService",function(e){var n={},r="wishlist_";t.observable.mixin(n),n.getItems=function(){return i(e.get(r)||{})},n.addItem=function(t,e,r){var i=t.urlKey+(r?"/"+r.variantID:""),o=n.getItems();return o[i]?o[i].quantity+=e:o[i]={product:t,key:i,quantity:e,variant:r},u(o),o[i]},n.removeItem=function(t){var e=t.key||t,r=n.getItems();delete r[e],u(r)},n.getItemCount=function(){return Object.keys(n.getItems()).length},n.isEmpty=function(){return 0===n.getItemCount()},n.exists=function(e){var r=n.getItems();return!t.Util.isUndefined(r[e])};var i=function(e){if(!e)return e;for(var n in e)e[n].product=t.Util.extend(new t.models.Product,e[n].product);return e},u=function(t){e.set(r,t),n.emit("itemsUpdated",n,t)};return n})}(sofa,document);