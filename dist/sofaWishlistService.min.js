/**
 * sofa-wishlist-service - v0.4.1 - Fri Mar 27 2015 12:34:59 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(t){"use strict";t.define("sofa.WishlistService",function(e){var n={},i="wishlist_";t.observable.mixin(n),n.getItems=function(){return r(e.get(i)||{})},n.addItem=function(t,e,i){var r=t.id+(i?"/"+i.id:""),o=n.getItems();return o[r]?o[r].quantity+=e:o[r]={product:t,key:r,quantity:e,variant:i},u(o),o[r]},n.removeItem=function(t){var e=t.key||t,i=n.getItems();delete i[e],u(i)},n.getItemCount=function(){return Object.keys(n.getItems()).length},n.isEmpty=function(){return 0===n.getItemCount()},n.exists=function(e){var i=n.getItems();return!t.Util.isUndefined(i[e])};var r=function(e){if(!e)return e;for(var n in e)e[n].product=t.Util.extend(new t.models.Product,e[n].product);return e},u=function(t){e.set(i,t),n.emit("itemsUpdated",n,t)};return n})}(sofa,document);